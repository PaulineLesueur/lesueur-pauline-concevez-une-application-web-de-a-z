<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pay My Buddy - Transfer</title>
    <link rel="icon" type="image/x-icon" th:href="@{/img/favicon.ico}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" th:href="@{/style/style.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/style/transfer.css}" />
    <script th:src="@{/js/pagination.js}"></script>
</head>
<body>
    <header>
        <div class="container">
            <a th:href="@{/home/transfer}"><h1>Pay My Buddy</h1></a>
            <nav>
                <li><a th:href="@{/home/transfer}">Home</a></li>
                <li><a class="active" th:href="@{/home/transfer}">Transfer</a></li>
                <li><a th:href="@{/home/money}">Money</a></li>
                <li>Profile</li>
                <li>Contact</li>
                <li>
                    <form name="logout" th:action="@{/logout}" method="POST">
                        <input type="submit" value="Log out" />
                    </form>
                </li>
            </nav>
        </div>
    </header>
    <section id="path">
        <div class="container">
            <a th:href="@{transfer}">Home</a> Transfer
        </div>
    </section>
    <main>
        <div class="container">
            <div class="head">
                <h3>Hello, <span th:text="${user.firstName}"></span> !</h3>
                <h4>Your balance : <span th:text="${balance}"></span> €</h4>
            </div>

            <div th:if="${successMessage}"><div class="success" th:text="${successMessage}"></div></div>
            <div th:if="${errorMessage}"><div class="error" th:text="${errorMessage}"></div></div>
            <section id="send_money">
                <div class="head">
                    <h2>Send Money</h2> <a class="button primary" th:href="@{transfer/addConnection}">Add Connection</a>
                </div>
                <div class="body">
                    <form name="transfer" th:action="@{/transfer}" method="POST">
                        <label for="select_a_connection"></label>
                        <select name="receiver" id="select_a_connection" required>
                            <option value="" selected>Select a Connection</option>
                            <option th:each="user : ${connections}"
                                    th:value="${user.getId}"
                                    th:text="${user.username}"></option>
                        </select>

                        <label for="description"></label>
                        <input class="description" type="text" name="description" id="description" placeholder="Description..." required />

                        <label for="amount"></label>
                        <input type="number" min="0" placeholder="0€ " name="amount" id="amount" required />
                        <input type="submit" class="button" value="Pay" />
                    </form>
                </div>
            </section>
            <section id="my_transactions">
                <div class="head">
                    <h2>My Transactions</h2>
                </div>
                <div class="body">
                    <ul id="transactionList">
                        <li>
                            <span>Connections</span>
                            <span>Description</span>
                            <span>Amount</span>
                        </li>
                        <li th:each="i : ${#numbers.sequence(transactions.size() - 1, 0, -1)}" th:with="transaction=${transactions[i]}">
                            <span th:text="${transaction.receiverAccount}"></span>
                            <span th:text="${transaction.description}"></span>
                            <span th:text="${transaction.amount} + ' €'"> </span>
                        </li>
                    </ul>
                </div>
                <div class="pagination" id="pagination"></div>

            </section>
        </div>
    </main>
</body>
</html>